export const products = [
  {
    id: 1,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/02/Screen-Shot-2023-02-21-at-13.04.02.png",
    text: "Accent chair",
    category: "outdoor",
  },
  {
    id: 2,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/01/Background-scaled.jpg",
    text: "Acacia Finger Joint boards",
    category: "indoor",
  },
  {
    id: 3,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/01/image_2_3057982.jpg",
    text: "Aster",
    category: "outdoor",
  },
  {
    id: 4,
    image:
      "https://lagreenworld.com/wp-content/uploads/2024/02/c58afebc-5c93-4d3d-9f68-176f0012bc33.1507ca7c40a982172df8db90ae43e197.jpeg.webp",
    text: "BED FRAME",
    category: "indoor",
  },
  {
    id: 5,
    image:
      "https://lagreenworld.com/wp-content/uploads/2024/02/c714706f-9982-4a60-b882-8990d662117b.ae22b8215f16608eb156706eeb2253e7.jpeg.webp",
    text: "BED FRAME",
    category: "indoor",
  },
  {
    id: 6,
    image:
      "https://lagreenworld.com/wp-content/uploads/2024/02/81ppPbP4HaL.jpg",
    text: "BED FRAME",
    category: "indoor",
  },
  {
    id: 7,
    image:
      "https://lagreenworld.com/wp-content/uploads/2024/02/14-inch-Solid-Wood-Platform-Bed-Queen-Frame-No-Squeak-Frame-Size-Box-Spring-Needed-Sturdy-White_962312ff-b074-4fc8-a3ec-aac560b88c28.00dfce88e439d92483bce1aedf86248f.jpeg.webp",
    text: "BED FRAME",
    category: "indoor",
  },
  {
    id: 8,
    image:
      "https://lagreenworld.com/wp-content/uploads/2024/02/81DyHnVwcZL._AC_SL1500_.jpg",
    text: "BED FRAME",
    category: "indoor",
  },
  {
    id: 9,
    image: "https://lagreenworld.com/wp-content/uploads/2024/02/s-l1200.webp",
    text: "BED FRAME",
    category: "indoor",
  },
  {
    id: 10,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/01/image_8_42647.jpg",
    text: "Begonia",
    category: "outdoor",
  },
  {
    id: 11,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/01/Screen-Shot-2023-01-10-at-22.47.29.png",
    text: "Bellflower dining set",
    category: "outdoor",
  },
  {
    id: 12,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/01/91jSUe7XsvL._AC_SL1500_.jpg",
    text: "Bellflower sofa set",
    category: "outdoor",
  },
  {
    id: 13,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/01/image_1_46650.jpg",
    text: "Bergenia",
    category: "outdoor",
  },
  {
    id: 14,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/02/Screen-Shot-2023-02-21-at-12.26.00.png",
    text: "Blue Wave",
    category: "indoor",
  },
  {
    id: 15,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/01/Screen-Shot-2023-01-03-at-15.55.46.png",
    text: "Cherry Blossom",
    category: "outdoor",
  },
  {
    id: 16,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/01/Screen-Shot-2023-01-03-at-15.48.00.png",
    text: "Cosmos",
    category: "outdoor",
  },
  {
    id: 17,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/02/Screen-Shot-2023-02-21-at-12.44.47.png",
    text: "Cream Chesterfield",
    category: "indoor",
  },
  {
    id: 18,
    image: "https://lagreenworld.com/wp-content/uploads/2023/01/SOFA-1-4.jpg",
    text: "Daisy",
    category: "outdoor",
  },
  {
    id: 19,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/02/Screen-Shot-2023-02-13-at-22.10.32.png",
    text: "Dining Chair",
    category: "indoor",
  },
  {
    id: 20,
    image: "./Screen-Shot-2023-02-13-at-22.13.28.webp",
    text: "Dining Chair",
    category: "indoor",
  },
  {
    id: 21,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/02/Screen-Shot-2023-02-13-at-22.12.50.png",
    text: "Dining Chair",
    category: "indoor",
  },
  {
    id: 22,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/02/Screen-Shot-2023-02-13-at-22.08.51.png",
    text: "Dining Chair",
    category: "indoor",
  },
  {
    id: 23,
    image:
      "  https://lagreenworld.com/wp-content/uploads/2023/02/Screen-Shot-2023-02-13-at-22.08.07.png",
    text: "Dining Chair",
    category: "indoor",
  },
  {
    id: 24,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/02/Screen-Shot-2023-02-13-at-22.07.42.png",
    text: "Dining Chair",
    category: "indoor",
  },
  {
    id: 25,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/02/Screen-Shot-2023-02-13-at-22.01.24.png",
    text: "Dining Chair",
    category: "indoor",
  },
  {
    id: 26,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/02/Screen-Shot-2023-02-13-at-22.13.48.png",
    text: "Dining Chair",
    category: "indoor",
  },
  {
    id: 27,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/02/tokio-dining-chair-angle_1-699x699-1.jpg",
    text: "Dining Chair",
    category: "indoor",
  },
  {
    id: 28,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/02/Screen-Shot-2023-02-13-at-22.16.02.png",
    text: "Dining Chair",
    category: "indoor",
  },
  {
    id: 29,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/02/Screen-Shot-2023-02-21-at-12.23.19.png",
    text: "Emerson sofa",
    category: "indoor",
  },
  {
    id: 30,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/02/Screen-Shot-2023-02-21-at-12.23.50.png",
    text: "Eton sofa",
    category: "indoor",
  },
  {
    id: 31,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/02/Screen-Shot-2023-02-21-at-13.18.01.png",
    text: "Eton sofa",
    category: "indoor",
  },
  {
    id: 32,
    image:
      "https://lagreenworld.com/wp-content/uploads/2023/01/624066_de185a7984ad417baa61fa43474ac45bmv2-2-1.jpg",
    text: "Gerbera",
    category: "indoor",
  },
  {
    id: 33,
    image: "https://lagreenworld.com/wp-content/uploads/2023/01/CHAIR-HT07.jpg",
    text: "Hibiscus",
    category: "outdoor",
  },
  {
    id: 34,
    image: "https://lagreenworld.com/wp-content/uploads/2023/01/TABLE_HT02.jpg",
    text: "Hollyhocks",
    category: "outdoor",
  },
];

const productsContainer = document.getElementById("products-container");
const gridViewButton = document.getElementById("grid-view");
const listViewButton = document.getElementById("list-view");
const sortSelect = document.getElementById("sort");
const productsPerPage = 15; // Number of products per page
let currentPage = 1; // Track current page

// Function to display products dynamically with pagination
function displayProducts(filter = "all", page = 1) {
  productsContainer.innerHTML = "";

  const filteredProducts =
    filter === "all"
      ? products
      : products.filter((product) => product.category === filter);

  // Determine the start and end index for the current page
  const start = (page - 1) * productsPerPage;
  const end = page * productsPerPage;
  const productsToShow = filteredProducts.slice(start, end);

  productsToShow.forEach((product) => {
    const productCard = `
      <div class="col-md-4">
        <div class="card" data-id="${product.id}">
          <img src="${product.image}" class="card-img-top" alt="${product.text}">
          <button class="shop-button">
            <i class="fas fa-shopping-cart"></i>
          </button>
          <div class="card-body">
            <p class="card-text">${product.text}</p>
          </div>
        </div>
      </div>
    `;
    productsContainer.innerHTML += productCard;
  });

  // Add click event listener to each product card
  const cards = document.querySelectorAll(".card");
  cards.forEach((card) => {
    card.addEventListener("click", function () {
      const productId = this.getAttribute("data-id");
      viewProductDetails(productId);
    });
  });

  // Setup pagination buttons
  setupPagination(filteredProducts.length);

  // Save the current page to localStorage
  localStorage.setItem("currentPage", page);
}

// Function to setup pagination buttons
function setupPagination(totalProducts) {
  const totalPages = Math.ceil(totalProducts / productsPerPage);
  const paginationContainer = document.getElementById("pagination-container");
  paginationContainer.innerHTML = ""; // Clear existing buttons

  for (let i = 1; i <= totalPages; i++) {
    const button = document.createElement("button");
    button.innerText = i;
    button.classList.add("pagination-btn");

    // Highlight the current page button
    if (i === currentPage) {
      button.classList.add("active");
    }

    // Add click event to switch pages
    button.addEventListener("click", () => {
      currentPage = i;
      displayProducts("all", currentPage); // You can pass the current filter if needed
    });

    paginationContainer.appendChild(button);
  }
}

// Load current page from localStorage if it exists
window.addEventListener("DOMContentLoaded", () => {
  const savedPage = localStorage.getItem("currentPage");
  if (savedPage) {
    currentPage = parseInt(savedPage);
  }
  displayProducts("all", currentPage); // Load products for the saved page
});

// Function to redirect to product details page
function viewProductDetails(id) {
  window.location.href = `product-details.html?id=${id}`; // Redirect to details page with product ID
}

// Filter by category
document.querySelectorAll(".category-link").forEach((link) => {
  link.addEventListener("click", (e) => {
    e.preventDefault();
    const category = e.target.getAttribute("data-category");
    displayProducts(category);
  });
});

// Grid/List View Toggle
gridViewButton.addEventListener("click", () => {
  productsContainer.classList.remove("list-view");
  productsContainer.classList.add("grid-view");
});

listViewButton.addEventListener("click", () => {
  productsContainer.classList.remove("grid-view");
  productsContainer.classList.add("list-view");
});

// Initial product load
displayProducts();
